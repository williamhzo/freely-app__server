(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{107:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(16),l=a.n(r),i=a(11),c=a(7),o=a(8),m=a(10),u=a(9),d=a(35),p=a(47),h=a.n(p),f=h.a.create({baseURL:"https://freely--app.herokuapp.com",withCredentials:!0});function g(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var _=function(e){return f.post("/api/auth/signup",e).then((function(e){return e.data})).catch(g)},E=function(e){return f.post("/api/auth/signin",e).then((function(e){return e.data})).catch(g)},b=function(){return f.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(g)},v=function(){return f.get("/api/auth/logout").then((function(e){return e.data})).catch(g)},y=function(){return f.get("/api/users").then((function(e){return e.data})).catch(g)},N=function(e,t){return f.get("/api/users?".concat(e,"=").concat(t)).then((function(e){return e.data})).catch(g)},k=function(e,t){return f.patch("/api/users/".concat(e),t).then((function(e){return e.data})).catch(g)},S=function(e){return f.get("/api/collabs/"+e).then((function(e){return e.data})).catch(g)},C=function(e,t){return f.patch("/api/collabs/".concat(e),t).then((function(e){return e.data})).catch(g)},O=function(e){return f.post("/api/collabs/",e).then((function(e){return e.data})).catch(g)},j=function(){return f.get("/api/collabs").then((function(e){return e.data}))},x=function(){return f.get("/api/categories").then((function(e){return e.data}))},w=function(){return f.get("/api/skills").then((function(e){return e.data}))},P=function(){return f.get("/api/users").then((function(e){return Object(d.a)(e.data).filter((function(e){return e.bio&&e.location&&e.title&&e.userCategory})).map((function(e){return e.location})).sort((function(e,t){return e>t})).reduce((function(e,t){return e.slice(-1)[0]!==t&&e.push(t),e}),[])})).catch(g)},F=function(){return f.get("/api/skills").then((function(e){return e.data.filter((function(e){return e.currentlyInUse}))})).catch(g)},L=function(){return f.get("/api/categories").then((function(e){return e.data.filter((function(e){return e.currentlyInUse}))})).catch((function(e){return console.log(e)}))},U=function(){return f.get("/api/users").then((function(e){return e.data.filter((function(e){return e.bio&&e.location&&e.title&&e.userCategory}))})).catch(g)},A=function(e,t){return f.post("/api/messages/new/".concat(e,"/").concat(t)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},M=function(e){return f.get("/api/messages/message/"+e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},I=function(e,t){return f.post("/api/messages/message/"+e,t).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},D=function(e){return f.get("/api/messages/user/"+e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},T=function(e){return f.patch("/api/messages/unread/"+e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},R=function(e){return f.get("/api/messages/unread/"+e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},J=s.a.createContext(),z=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){console.log(t),e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return s.a.createElement(J.Provider,{value:e},this.props.children)}}]),a}(n.Component),H=a(19),B=function(e){return function(t){return s.a.createElement(J.Consumer,null,(function(a){return s.a.createElement(e,Object.assign({},t,{context:a}))}))}},W=function(e){var t=["hamburger-btn__line"];return e.hamburgerToggle&&t.push("animate"),s.a.createElement("button",{className:"hamburger-btn",onClick:e.click},s.a.createElement("div",{className:t.join(" ")}),s.a.createElement("div",{className:t.join(" ")}),s.a.createElement("div",{className:t.join(" ")}))},Z=(a(107),B(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={notification:!1},e.handleLogout=function(e){v().then((function(){e()})).catch((function(e){console.log(e)}))},e.checkNotifications=function(){e.props.context.user&&R(e.props.context.user._id).then((function(t){t&&e.setState({notification:!0})}))},e.componentDidMount=function(){setInterval(e.checkNotifications,2e3)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("nav",{id:"Nav",className:"Nav"},s.a.createElement(i.c,{exact:!0,onClick:this.props.click,to:"/"},s.a.createElement("h3",{className:"Nav__logo"},"Freely")),s.a.createElement("ul",{className:"Nav__list"},s.a.createElement("li",{className:"Nav__item"},s.a.createElement(i.c,{className:"Nav__link",exact:!0,onClick:this.props.click,to:this.props.context.user?"/collab/new":"/login"},s.a.createElement("span",{className:"Nav__plus-icon"},"+"),s.a.createElement("p",{className:"Nav__plus-icon-text"},"Create a bundle"))),s.a.createElement("li",{className:"Nav__item"},s.a.createElement(i.c,{className:"Nav__link",onClick:this.props.click,to:this.props.context.user?"/".concat(this.props.context.user.userName):"/login"},this.props.context.user&&s.a.createElement("div",null,this.props.context.user.name),!this.props.context.user&&s.a.createElement("div",null,"Profile"))),s.a.createElement("li",{className:"Nav__item hamburger__button"},s.a.createElement(W,{click:this.props.hamburgerClickHandler,hamburgerToggle:this.props.toggled})),this.props.context.user&&s.a.createElement("li",{className:"Nav__item hamburger__item  Nav__messages"},s.a.createElement(i.c,{className:"Nav__link",exact:!0,to:"/messages"},"Messages"),this.state.notification&&s.a.createElement("div",{className:"Nav__notification"})),s.a.createElement("li",{className:"Nav__item hamburger__item"},s.a.createElement(i.c,{className:"Nav__link",exact:!0,to:"/collabs-create"},"About")),this.props.context.user&&s.a.createElement("li",{className:"Nav__item hamburger__item"},s.a.createElement(i.c,{className:"Nav__link",exact:!0,to:"/",onClick:function(t){return e.handleLogout(e.props.context.removeUser)}},"Log Out")),!this.props.context.user&&s.a.createElement("li",{className:"Nav__item hamburger__item primary-btn"},s.a.createElement(i.c,{className:"Nav__link",exact:!0,to:"/login"},"Join"))))}}]),a}(n.Component))),$=function(e){return s.a.createElement("div",{className:"backdrop",onClick:e.click},s.a.createElement("div",{className:"backdrop__secondary",onClick:e.click}))},q=a(53),G=B((function(e){var t=e.component,a=e.context,n=Object(q.a)(e,["component","context"]);return a.isLoading?null:a.isLoggedIn?s.a.createElement(H.b,Object.assign({},n,{render:function(e){return s.a.createElement(t,e)}})):s.a.createElement(H.a,{to:"/login"})})),K=function(e){var t=["hamburger-menu"];e.show&&t.push("open");return s.a.createElement(J.Consumer,null,(function(a){return s.a.createElement("nav",{className:t.join(" ")},s.a.createElement("ul",{className:"hamburger-menu__list"},a.user&&s.a.createElement("li",{className:"hamburger-menu__item"},s.a.createElement(i.b,{className:"hamburger-menu__link",onClick:e.click,to:"/messages"},"Messages")),!a.user&&s.a.createElement("li",{className:"hamburger-menu__item"},s.a.createElement(i.b,{className:"hamburger-menu__link",to:"/login",onClick:e.click},"Join Us")),s.a.createElement("li",{className:"hamburger-menu__item"},s.a.createElement(i.b,{className:"hamburger-menu__link",to:"/about",onClick:e.click},"About")),a.user&&s.a.createElement("li",{className:"hamburger-menu__item"},s.a.createElement(i.b,{className:"hamburger-menu__link",to:"/",onClick:function(t){return n=a.removeUser,s=e.click,v().then((function(){n()})).catch((function(e){console.log(e)})),void s();var n,s}},"Log Out"))))}))},Q=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.heading,a=e.data,n=e.label,r=e.className,l=e.linked;return s.a.createElement("div",{className:r},s.a.createElement("h2",{className:"display__heading"},t),s.a.createElement("ul",{className:"display__badgelist"},a.map((function(e){return l?s.a.createElement("li",{className:"display__badge"},s.a.createElement("a",{href:"/"+e.userName},e[n])):s.a.createElement("li",{className:"display__badge"},e[n])}))))}}]),a}(n.Component),Y=a(5),X=a(14),V=a(17),ee=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("span",{className:"linkicon"},function(e){e=e.toLowerCase();var t=s.a.createElement(Y.a,{icon:X.f});return e.match(/facebook.com/)?t=s.a.createElement(Y.a,{icon:V.d}):e.match(/twitter.com/)?t=s.a.createElement(Y.a,{icon:V.s}):e.match(/linkedin.com/)?t=s.a.createElement(Y.a,{icon:V.i}):e.match(/instagram.com/)?t=s.a.createElement(Y.a,{icon:V.h}):e.match(/dribble/)?t=s.a.createElement(Y.a,{icon:V.b}):e.match(/etsy.com/)?t=s.a.createElement(Y.a,{icon:V.c}):e.match(/flickr.com/)?t=s.a.createElement(Y.a,{icon:V.e}):e.match(/goodreads.com/)?t=s.a.createElement(Y.a,{icon:V.g}):e.match(/dev.to/)?t=s.a.createElement(Y.a,{icon:V.a}):e.match(/github.com/)?t=s.a.createElement(Y.a,{icon:V.f}):e.match(/medium.com/)?t=s.a.createElement(Y.a,{icon:V.j}):e.match(/patreon.com/)?t=s.a.createElement(Y.a,{icon:V.k}):e.match(/paypal/)?t=s.a.createElement(Y.a,{icon:V.l}):e.match(/pscp.tv/)?t=s.a.createElement(Y.a,{icon:V.m}):e.match(/pinterest.com/)?t=s.a.createElement(Y.a,{icon:V.n}):e.match(/producthunt.com/)?t=s.a.createElement(Y.a,{icon:V.o}):e.match(/reddit.com/)?t=s.a.createElement(Y.a,{icon:V.p}):e.match(/soundcloud.com/)?t=s.a.createElement(Y.a,{icon:V.q}):e.match(/spotify.com/)?t=s.a.createElement(Y.a,{icon:V.r}):e.match(/vimeo.com/)?t=s.a.createElement(Y.a,{icon:V.t}):e.match(/wordpress.com/)?t=s.a.createElement(Y.a,{icon:V.u}):e.match(/youtube.com/)&&(t=s.a.createElement(Y.a,{icon:V.v})),t}(this.props.link))}}]),a}(n.Component),te=(a(41),B(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;N("userName",this.props.match.params.username).then((function(t){t.length>0?e.setState(t[0]):e.props.history.push("/error_404")})).catch((function(e){return console.log(e)}))}},{key:"parselink",value:function(e){return e.match(/^http/)?e:"http://"+e}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"display container"},this.props.context.user&&this.props.context.user._id===this.state._id&&s.a.createElement("button",{className:"edit__button collabbutton",onClick:function(){e.props.history.push("/"+e.state.userName+"/edit")}},"Edit"),this.state.profilePicture&&s.a.createElement("div",{className:"display__avatarbox"},s.a.createElement("img",{className:"display__picture",src:this.state.profilePicture,alt:""})),s.a.createElement("h2",{className:"display__name"},this.state.name),this.state.userCategory&&s.a.createElement(Q,{data:this.state.userCategory,label:"name"}),this.state.title&&s.a.createElement("div",{className:"display__title"},this.state.title),this.state.socialLinks&&s.a.createElement("div",{className:"display__sociallinks"},this.state.socialLinks.map((function(t,a){return s.a.createElement("a",{href:e.parselink(t),target:"_blank",rel:"noopener noreferrer",key:a,className:"display__sociallink"},s.a.createElement(ee,{link:t}))}))),s.a.createElement("ul",{className:"display__bullets"},this.state.openToProjects&&s.a.createElement("li",{className:"display__bullet"},s.a.createElement("span",{className:"bulleticon"},s.a.createElement(Y.a,{icon:X.m})),"Open to collaborations"),this.state.remote&&this.state.openToProjects&&s.a.createElement("li",{className:"display__bullet"},s.a.createElement("span",{className:"bulleticon"},s.a.createElement(Y.a,{icon:X.e})),"Open to remote collabs"),this.state.location&&s.a.createElement("li",{className:"display__bullet"},s.a.createElement("span",{className:"bulleticon"},s.a.createElement(Y.a,{icon:X.g})),"Based in ",this.state.location||""),this.state.preferredContact&&s.a.createElement("li",{className:"display__bullet"},s.a.createElement("span",{className:"bulleticon"},s.a.createElement(Y.a,{icon:X.d})),"Preferred contact: ",this.state.preferredContact)),this.state.userSkills&&s.a.createElement(Q,{heading:"Skills",data:this.state.userSkills,label:"name",className:"display__fullwidth"}),this.state.bio&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",{className:"display__heading"},"About me"),s.a.createElement("div",{className:"display__bio"},this.state.bio)),this.state.portfolio&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",{className:"display__heading"},"Portfolio"),s.a.createElement("div",{className:"display__portfolio"},this.state.portfolio.map((function(t,a){return s.a.createElement("div",{key:a,className:"display__portfolioitem"},s.a.createElement("img",{className:"display__portfolioimage",src:t.image,alt:""}),s.a.createElement("div",{className:"display__portfoliotext"},s.a.createElement("h3",{className:"display__portfoliotitle"},t.title),s.a.createElement("div",{className:"display__portfoliodescription"},t.description),t.link&&s.a.createElement("div",{className:"display__portfoliolink"},s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.parselink(t.link)},"Link \xbb"))))})))),this.state.userCollab&&s.a.createElement("div",{className:"display__collabs"},s.a.createElement("h2",{className:"display__heading"},"Projects"),this.state.userCollab.map((function(e,t){return s.a.createElement("div",{key:t,className:"display__collabcard"},s.a.createElement("img",{src:e.image,alt:"",className:"display__collabcardimage"}),s.a.createElement("h3",{className:"display__collabcardtitle"},e.title),s.a.createElement("p",{className:"display__collabcarddescription"},e.description))}))))}}]),a}(n.Component))),ae=a(22),ne=a(23),se=(a(114),RegExp(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)),re=function(e){var t=e.formErrors,a=Object(q.a)(e,["formErrors"]),n=!0;return Object.values(t).forEach((function(e){e.length>0&&(n=!1)})),Object.values(a).forEach((function(e){null===e&&(n=!1)})),n},le=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={accountExists:!1,usernameAvailable:!0,name:"",userName:"",email:"",password:"",formErrors:{name:"",userName:"",email:"",password:""},credentialsError:""},e.handleClick=function(){e.setState((function(e){return{accountExists:!e.accountExists}}))},e.handleChange=function(t){var a,n=t.target,s=n.name,r=n.value,l=Object(ne.a)({},e.state.formErrors);if(!e.state.accountExists)switch(s){case"name":l.name=r.length<3?"Name must be at least 3 characters long":"";break;case"email":r.length>3&&(l.email=se.test(r)?"":"Please enter a valid email address");break;case"userName":r.length>3&&(l.userName=t.target.value.match(/^[a-zA-Z0-9_]{3,15}$/)?"":"Username must be 3-15 characters long (you can add '_' and/or numbers)");break;case"password":r.length>2&&(l.password=r.length<5?"Password should be at least 5 characters long":"")}e.setState((a={},Object(ae.a)(a,s,r),Object(ae.a)(a,"formErrors",l),a))},e.handleUsername=function(t){t.target.value.match(/^(about|user|collab|collabs|messages|message|edit|login|signup|freely)$/i)&&e.setState({usernameAvailable:!1}),N("userName",t.target.value).then((function(t){t.length>0?e.setState({usernameAvailable:!1}):e.setState({usernameAvailable:!0})}))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.email,s=a.password,r=a.name,l=a.userName;e.state.accountExists?E({email:n,password:s}).then((function(t){e.context.setUser(t),e.props.history.push("/")})).catch((function(t){e.setState({credentialsError:"Invalid credentials"})})):re(e.state)&&_({email:n,password:s,name:r,userName:l}).then((function(t){e.context.setUser(t),e.props.history.push("/"+t.userName+"/edit")})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.formErrors;return s.a.createElement("div",{className:"login-container"},this.state.accountExists&&s.a.createElement("h2",{className:"form-login__title"},"Welcome back!"," ",s.a.createElement("span",{role:"img","aria-label":"waving-emoji"},"\ud83d\udc4b")),!this.state.accountExists&&s.a.createElement("h2",{className:"form-login__title"},"Create an account to set up your freelancer profile"),s.a.createElement("form",{className:"form-login",onChange:this.handleChange,onSubmit:this.handleSubmit},!this.state.accountExists&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-login__group"},s.a.createElement("label",{className:"form-login__label",htmlFor:"name"},"Name"),s.a.createElement("br",null),s.a.createElement("input",{className:"form-login__input",type:"text",id:"name",name:"name"}),s.a.createElement("p",{className:"form-login__error-msg"},e.name)),s.a.createElement("div",{className:"form-login__group"},s.a.createElement("label",{className:"form-login__label",htmlFor:"userName"},"Username"),s.a.createElement("br",null),s.a.createElement("input",{className:"form-login__input",type:"text",id:"userName",name:"userName",onChange:this.handleUsername}),this.state.usernameAvailable&&s.a.createElement("p",{className:"form-login__error-msg"},e.userName),!this.state.usernameAvailable&&s.a.createElement("p",{className:"form-login__error-msg"},"Sorry, this username is already taken"))),s.a.createElement("div",{className:"form-login__group"},s.a.createElement("label",{className:"form-login__label",htmlFor:"email"},"Email"),s.a.createElement("br",null),s.a.createElement("input",{className:"form-login__input",type:"email",id:"email",name:"email"}),!this.state.accountExists&&s.a.createElement("p",{className:"form-login__error-msg"},e.email)),s.a.createElement("div",{className:"form-login__group"},s.a.createElement("label",{className:"form-login__label",htmlFor:"password"},"Password"),s.a.createElement("br",null),s.a.createElement("input",{className:"form-login__input",type:"password",id:"password",name:"password",placeholder:this.state.accountExists?null:"5+ characters"}),!this.state.accountExists&&s.a.createElement("p",{className:"form-login__error-msg"},e.password)),s.a.createElement("div",{className:"form-login__button-group"},s.a.createElement("button",{className:"form-login__button"},this.state.accountExists?"Log in":"Create Account"),this.state.accountExists&&s.a.createElement("p",{className:"form-login__error-msg credentials"},this.state.credentialsError))),s.a.createElement("div",{className:"form-login__link"},this.state.accountExists&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{onClick:this.handleClick},"Don't have an account yet?"),s.a.createElement("h3",{onClick:this.handleClick},s.a.createElement(Y.a,{icon:X.c}))),!this.state.accountExists&&s.a.createElement("h3",{onClick:this.handleClick},"I already have an account ")))}}]),a}(n.Component);le.contextType=J;var ie=Object(H.g)(le),ce=(a(56),a(156)),oe=a(155),me=a(154),ue=a(36),de=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],isLoading:!1},e.handleSearchChange=function(t){e.setState({search:t.target.value,isLoading:!0}),clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e.performSearch()}),1e3)},e.performSearch=function(){""!==e.state.search?h.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e.state.search,".json?limit=3&types=place&access_token=").concat("pk.eyJ1Ijoid2lsbGlhbWh6byIsImEiOiJja2FiZzdqZHQxNmhoMnNtdGRka3BsOW4wIn0.pYgviWXcncoEoDMGSK3eCw")).then((function(t){e.setState({results:t.data.features,isLoading:!1})})).catch((function(e){return console.log(e)})):e.setState({results:[],isLoading:!1})},e.handleItemClicked=function(t){e.setState({search:t.place_name,results:[]}),e.props.onSelect(t)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{type:"text",name:"location",id:"location",value:this.props.userLocation||"",onChange:this.handleSearchChange,placeholder:"Enter an address"}),s.a.createElement("ul",{className:"CityAutoComplete-results"},this.state.results.map((function(t){return s.a.createElement("li",{key:t.id,className:"CityAutoComplete-items",onClick:function(){return e.handleItemClicked(t)}},t.place_name)})),this.state.isLoading&&s.a.createElement("li",{className:"CityAutoComplete-items"},"Let me think...")))}}]),a}(n.Component),pe=(a(115),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"error"},s.a.createElement(Y.a,{className:"error__clear",onClick:this.props.handleError,icon:X.k}),s.a.createElement("p",{className:"error__title"},"Error"),s.a.createElement("p",null,this.props.error))}}]),a}(n.Component)),he=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={categoryOptions:[],saved:!0,usernameAvailable:!0,newPortfolio:{},error:void 0},e.handleFormSubmit=function(t){if(t.preventDefault(),e.state.name)if(e.state.usernameAvailable)if(!e.state.email||e.state.email.match(/^[\w-.]+@([\w-]+\.)+[\w-]{2,10}$/)){var a=Object(ne.a)({},e.state);delete a.saved,delete a.skillOptions,delete a.categoryOptions,delete a._id,delete a.addSocial,a.portfolio&&(a.portfolio=JSON.stringify(a.portfolio)),a.userCategory&&(a.userCategory=JSON.stringify(a.userCategory)),a.userSkills&&(a.userSkills=JSON.stringify(a.userSkills)),a.userCollab&&(a.userCollab=JSON.stringify(a.userCollab));var n=Object(ue.a)(a);k(e.state._id,n).then((function(t){t.userName!==e.props.match.params.username&&e.props.history.push("/"+t.userName+"/edit"),e.setState({apiRes:t}),e.setState({saved:!0})}))}else e.setState({error:"Please enter a valid address."});else e.setState({error:"Username is either invalid or unavailable. Usernames can by 3\u201310 characters and use letters, numbers, and underscores"});else e.setState({error:"Please enter your name."})},e.handleCategoryChange=function(t,a){e.setState({userCategory:a,saved:!1})},e.handleSkillChange=function(t,a){e.setState({userSkills:a,saved:!1})},e.handleUsername=function(t){t.target.value.match(/^[a-zA-Z0-9_]{3,10}$/)&&!t.target.value.match(/^(about|user|collab|collabs|messages|message|edit|login|signup|freely)$/i)?N("userName",t.target.value).then((function(t){t.length>0&&t[0]._id!==e.state._id?e.setState({usernameAvailable:!1}):e.setState({usernameAvailable:!0})})):e.setState({usernameAvailable:!1})},e.handlePlaceChange=function(t){e.setState({location:t.place_name,saved:!1})},e.handleError=function(t){e.setState({error:void 0})},e.handleFormChange=function(t){if("social"===t.target.name)e.setState({socialLinks:Object(d.a)(document.querySelectorAll("[name='social']")).map((function(e){return e.value}))}),e.setState({saved:!1});else if("profilePicture"===t.target.name){if(t.target.files[0].size>75e4)return void e.setState({error:"Maximum file size: 750kb"});e.setState({profilePicture:t.target.files[0]});var a=new FileReader;a.onload=function(){e.setState({temporaryPicture:a.result})},a.readAsDataURL(t.target.files[0]),e.setState({saved:!1})}else e.setState(Object(ae.a)({},t.target.name,t.target.value)),e.setState({saved:!1})},e.handlePortfolio=function(t,a){if(e.setState({saved:!1}),"image"!==a.target.name){var n=Object(d.a)(e.state.portfolio);n[t][a.target.name]=a.target.value,e.setState({portfolio:n})}},e.handleNewPortfolio=function(t){var a=Object(ne.a)({},e.state.newPortfolio);if("image"===t.target.name){if(t.target.files[0].size>75e4)return console.log("Big image"),void e.setState({error:"Maximum file size: 750kb"});a.image=t.target.files[0];var n=new FileReader;n.onload=function(){a.temporaryPicture=n.result,e.setState({newPortfolio:a}),console.log(a)},n.readAsDataURL(t.target.files[0])}else a[t.target.name]=t.target.value,e.setState({newPortfolio:a})},e.handleAddPortfolio=function(t){t.preventDefault(),Object(ne.a)({},e.state.newPortfolio).title&&Object(ne.a)({},e.state.newPortfolio).description&&Object(ne.a)({},e.state.newPortfolio).link?(e.setState(Object(ae.a)({},"portfolio"+e.state.portfolio.length,e.state.newPortfolio.image)),e.setState({portfolio:e.state.portfolio.concat([e.state.newPortfolio]),saved:!1,newPortfolio:{image:"",title:"",description:"",link:""}})):e.setState({error:"Please fill out all fields."})},e.handleRemovePortfolio=function(t){e.setState({portfolio:e.state.portfolio.filter((function(e,a){return a!==t&&e})),saved:!1})},e.handlePortfolioImage=function(t,a){e.setState(Object(ae.a)({},"portfolio"+t,a.target.files[0]));var n=Object(d.a)(e.state.portfolio),s=new FileReader;s.onload=function(){n[t].temporaryPicture=s.result,e.setState({portfolio:n})},s.readAsDataURL(a.target.files[0])},e.handleAddSocial=function(t){t.preventDefault(),e.state.addSocial&&e.setState({socialLinks:e.state.socialLinks.concat([e.state.addSocial]),saved:!1,addSocial:""})},e.handleRemoveSocial=function(t){e.setState({socialLinks:e.state.socialLinks.filter((function(e,a){return a!==t&&e})),saved:!1})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;N("userName",this.props.match.params.username).then((function(t){e.setState(t[0])})),x().then((function(t){e.setState({categoryOptions:t})})),w().then((function(t){e.setState({skillOptions:t})}))}},{key:"render",value:function(){var e=this;return this.context.user&&this.context.user.userName===this.props.match.params.username?s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{onChange:this.handleFormChange,onSubmit:this.handleFormSubmit,className:"display container"},s.a.createElement("button",{className:this.state.saved?"edit__button saved":this.state.usernameAvailable?"edit__button unsaved":"edit__button invalid"},this.state.saved?"Saved":"Save"),s.a.createElement("div",{className:"display__avatarbox edit"},s.a.createElement("label",{htmlFor:"profilePicture"},s.a.createElement("input",{type:"file",name:"profilePicture",id:"profilePicture",className:"input--hidden",accept:".png, .jpg, .jpeg"}),s.a.createElement("img",{className:"display__picture",src:this.state.temporaryPicture||this.state.profilePicture,alt:""}))),s.a.createElement("h2",{className:"display__name"},s.a.createElement("input",{type:"text",spellcheck:"false",name:"name",id:"name",placeholder:"Name",value:this.state.name})),s.a.createElement("div",{className:"display__categories"},s.a.createElement(ce.a,{multiple:!0,onChange:this.handleCategoryChange,limitTags:3,id:"tags-outlined",options:this.state.categoryOptions,value:this.state.userCategory,getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}})),s.a.createElement(me.a,{type:"text",name:"title",id:"title",value:this.state.title,className:"display__title",maxLength:280,placeholder:"Intro"}),s.a.createElement("div",{className:"display__editsocial"},this.state.socialLinks&&this.state.socialLinks.map((function(t,a){return s.a.createElement("label",{className:"display__editsociallink",htmlFor:"social"+a},s.a.createElement(ee,{link:t}),s.a.createElement("input",{type:"text",name:"social",id:"social"+a,value:t,spellcheck:"false"}),s.a.createElement(Y.a,{onClick:function(){return e.handleRemoveSocial(a)},icon:X.h}))})),s.a.createElement("label",{htmlFor:"social\u03c0",className:"display__editsociallink"},s.a.createElement(ee,{link:""}),s.a.createElement("input",{className:"social--link",type:"text",name:"addSocial",placeholder:"Link",id:"social\u03c0",onKeyDown:function(t){return 13===t.keyCode?e.handleAddSocial(t):null},value:this.state.addSocial}),s.a.createElement(Y.a,{onClick:this.handleAddSocial,icon:X.j}))),s.a.createElement("div",{className:"display__bullets"},s.a.createElement("h3",null,"Key Points"),s.a.createElement("ul",null,s.a.createElement("li",{className:"display__bullet"},s.a.createElement("select",{id:"openToProjects",value:this.state.openToProjects,name:"openToProjects"},s.a.createElement("option",{value:!0},"Open to collaborations"),s.a.createElement("option",{value:!1},"Not open to collaborations right now"))),s.a.createElement("li",{className:"display__bullet display__location"},"Based in",s.a.createElement(de,{onSelect:this.handlePlaceChange,userLocation:this.state.location})),s.a.createElement("li",{className:"display__bullet"},s.a.createElement("select",{id:"remote",value:this.state.remote,name:"remote"},s.a.createElement("option",{value:!0},"Open to remote collabs"),s.a.createElement("option",{value:!1},"Not open to remote collabs"))),s.a.createElement("li",{className:"display__bullet"},"Preferred method of contact:"," ",s.a.createElement("input",{type:"text",name:"preferredContact",id:"preferredContact",spellcheck:"false",value:this.state.preferredContact||"",placeholder:"Contact"}))),s.a.createElement("h3",null,"Personal Info"),s.a.createElement("ul",null,s.a.createElement("li",{className:"display__bullet"},"Username:"," ",s.a.createElement("input",{type:"text",name:"userName",id:"userName",spellcheck:"false",onChange:this.handleUsername,value:this.state.userName}),this.state.usernameAvailable?s.a.createElement(Y.a,{icon:X.b}):s.a.createElement(Y.a,{icon:X.l})),s.a.createElement("li",{className:"display__bullet"},"Phone Number:"," ",s.a.createElement("input",{type:"text",name:"phone",id:"phone",spellcheck:"false",value:this.state.phone})),s.a.createElement("li",{className:"display__bullet"},"Email:"," ",s.a.createElement("input",{type:"text",name:"email",id:"email",spellcheck:"false",value:this.state.email})))),s.a.createElement("h2",{className:"display__heading"},"Skills"),this.state.skillOptions&&s.a.createElement(ce.a,{multiple:!0,limitTags:5,onChange:this.handleSkillChange,id:"tags-outlined",options:this.state.skillOptions,value:this.state.userSkills,getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}}),s.a.createElement("h2",{className:"display__heading"},"About"),s.a.createElement(me.a,{type:"bio",name:"bio",id:"bio",value:this.state.bio,className:"display__bio",placeholder:"Tell us about yourself..."})),s.a.createElement("div",{className:"display__portfolio container"},s.a.createElement("h2",{className:"display__heading"},"Portfolio"),this.state.portfolio&&this.state.portfolio.map((function(t,a){return s.a.createElement("form",{className:"display__portfolioitem",onChange:function(t){return e.handlePortfolio(a,t)}},s.a.createElement("label",{htmlFor:"image"+a},s.a.createElement("input",{onChange:function(t){return e.handlePortfolioImage(a,t)},type:"file",name:"image",id:"image"+a,className:"input--hidden",accept:".png, .jpg, .jpeg"}),s.a.createElement("img",{className:"display__portfolioimage",src:t.temporaryPicture||t.image,alt:""})),s.a.createElement("div",{className:"display__portfoliotext"},s.a.createElement("h3",{className:"display__portfoliotitle"},s.a.createElement("input",{type:"text",name:"title",id:"title",spellcheck:"false",value:t.title})),s.a.createElement(me.a,{name:"description",id:"description",value:t.description,className:"display__portfoliodescription",placeholder:"Intro"}),s.a.createElement("div",{className:"display__portfoliolink"},s.a.createElement("input",{type:"text",name:"link",id:"link",spellcheck:"false",value:t.link}),!t.temporaryPicture&&!t.image&&s.a.createElement("label",{htmlFor:"image"+a},s.a.createElement(Y.a,{icon:X.a})),s.a.createElement(Y.a,{onClick:function(){return e.handleRemovePortfolio(a)},icon:X.h}))))})),(!this.state.portfolio||this.state.portfolio.length<3)&&s.a.createElement("form",{className:"display__portfolioitem",onChange:this.handleNewPortfolio,onSubmit:this.handleAddPortfolio},s.a.createElement("label",{htmlFor:"image\u03c0"},s.a.createElement("input",{type:"file",name:"image",id:"image\u03c0",className:"input--hidden",accept:".png, .jpg, .jpeg"}),s.a.createElement("img",{className:"display__portfolioimage",src:this.state.newPortfolio.temporaryPicture||"https://images.unsplash.com/photo-1566041510632-30055e21a9cf?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=900&h=500&fit=crop&ixid=eyJhcHBfaWQiOjF9",alt:""})),s.a.createElement("div",{className:"display__portfoliotext"},s.a.createElement("h3",{className:"display__portfoliotitle"},s.a.createElement("input",{type:"text",name:"title",id:"title",spellcheck:"false",value:this.state.newPortfolio.title,placeholder:"Portfolio Item Title"})),s.a.createElement(me.a,{name:"description",id:"description",value:this.state.newPortfolio.description,className:"display__portfoliodescription",placeholder:"Describe your project..."}),s.a.createElement("div",{className:"display__portfoliolink"},s.a.createElement("input",{type:"text",name:"link",spellcheck:"false",id:"link",value:this.state.newPortfolio.link,placeholder:"A link to your project"}),s.a.createElement(Y.a,{icon:X.j,onClick:this.handleAddPortfolio}))))),!!this.state.error&&s.a.createElement(pe,{error:this.state.error,handleError:this.handleError})):s.a.createElement(H.a,{to:"/error_404"})}}]),a}(n.Component);he.contextType=J;var fe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={categoryOptions:[],skillOptions:[],saved:!0,title:"",creator:"",contributors:[],allUsers:[],description:"",skillsNeeded:[],categoryNeeded:[],image:"",open:!1,error:void 0},e.handleFormChange=function(t){if("image"===t.target.name){if(t.target.files[0].size>75e4)return void e.setState({error:"Maximum file size: 750kb"});var a=new FileReader;a.onload=function(){e.setState({temporaryPicture:a.result})},a.readAsDataURL(t.target.files[0]),e.setState({image:t.target.files[0],saved:!1})}else{var n;e.setState((n={},Object(ae.a)(n,t.target.name,t.target.value),Object(ae.a)(n,"saved",!1),n))}},e.handleError=function(t){e.setState({error:void 0})},e.handleFormSubmit=function(t){if(t.preventDefault(),e.state.title)if(e.state.description){var a=Object(ne.a)({},e.state);delete a.saved,delete a.skillOptions,delete a.categoryOptions,delete a.temporaryPicture,delete a._id,delete a.allUsers,a.contributors&&(a.contributors=JSON.stringify(a.contributors)),a.skillsNeeded&&(a.skillsNeeded=JSON.stringify(a.skillsNeeded)),a.categoryNeeded&&(a.categoryNeeded=JSON.stringify(a.categoryNeeded));var n=Object(ue.a)(a);C(e.state._id,n).then((function(t){e.setState({apiRes:t}),e.setState({saved:!0})}))}else e.setState({error:"Please enter a description"});else e.setState({error:"Please enter a title"})},e.handleCategoryChange=function(t,a){e.setState({categoryNeeded:a,saved:!1})},e.handleSkillChange=function(t,a){e.setState({skillsNeeded:a,saved:!1})},e.handleUserChange=function(t,a){e.setState({contributors:a,saved:!1})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;S(this.props.match.params.id).then((function(t){e.setState(t)})),x().then((function(t){e.setState({categoryOptions:t})})),w().then((function(t){e.setState({skillOptions:t})})),y().then((function(t){e.setState({allUsers:t})}))}},{key:"render",value:function(){return this.state.creator.userName!==this.context.user.username?s.a.createElement(H.a,{to:"/error_404"}):s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{onChange:this.handleFormChange,onSubmit:this.handleFormSubmit,className:"display--collab"},s.a.createElement("label",{htmlFor:"image"},s.a.createElement("div",{className:"display__collabimagebox",style:{backgroundImage:"url("+(this.state.temporaryPicture||this.state.image)+")"}},s.a.createElement("input",{type:"file",name:"image",id:"image",className:"input--hidden"}))),s.a.createElement("div",{className:"container display display__collabbody"},s.a.createElement("button",{className:this.state.saved?"edit__button collabbutton saved":"edit__button collabbutton unsaved"},this.state.saved?"Saved":"Save"),s.a.createElement("h2",{className:"display__collabtitle"},s.a.createElement(me.a,{type:"text",name:"title",id:"title",value:this.state.title,maxLength:280,placeholder:"Title"})),s.a.createElement("h3",{className:"display__heading"},"Description"),s.a.createElement(me.a,{type:"description",name:"description",id:"description",value:this.state.description,className:"display__description",placeholder:"Description"}),s.a.createElement("div",{className:"display__multiselect"},s.a.createElement("h3",{className:"display__heading"},"Roles Needed"),s.a.createElement(ce.a,{multiple:!0,onChange:this.handleCategoryChange,limitTags:5,id:"tags-outlined",options:this.state.categoryOptions,value:this.state.categoryNeeded,getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}})),s.a.createElement("div",{className:"display__multiselect"},s.a.createElement("h3",{className:"display__heading"},"Skills Needed"),s.a.createElement(ce.a,{multiple:!0,onChange:this.handleSkillChange,id:"tags-outlined",options:this.state.skillOptions,value:this.state.skillsNeeded,getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}})),s.a.createElement("div",{className:"display__multiselect"},s.a.createElement("h3",{className:"display__heading"},"Contributors"),s.a.createElement(ce.a,{multiple:!0,onChange:this.handleUserChange,id:"tags-outlined",options:this.state.allUsers,value:this.state.contributors,getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}})),s.a.createElement("ul",{className:"display__bullets"},s.a.createElement("li",{className:"display__bullet"},s.a.createElement("select",{id:"open",value:this.state.open,name:"open"},s.a.createElement("option",{value:!0},"Open to collaborators"),s.a.createElement("option",{value:!1},"Not open to collaborators right now"))),s.a.createElement("li",{className:"display__bullet"},"Created by ",this.state.creator.name),s.a.createElement("li",{className:"display__bullet"},"Preferred method of contact for ",this.state.creator.name,":"," ",this.state.creator.preferredContact)),this.state.userCollab&&s.a.createElement("div",{className:"display__collabs"},s.a.createElement("h2",{className:"display__heading"},"Collabs"),this.state.userCollab.map((function(e){return s.a.createElement("div",{className:"display__collab"},s.a.createElement("img",{src:e.image,alt:"",className:"display__collabimage"}),s.a.createElement("h3",{className:"display__collabtitle"},e.title),s.a.createElement("p",{className:"display__collabdescription"},e.description))}))))),!!this.state.error&&s.a.createElement(pe,{error:this.state.error,handleError:this.handleError}))}}]),a}(n.Component);fe.contextType=J;var ge=B(fe),_e=B(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={categoryOptions:[],skillOptions:[],saved:!0,title:"",creator:"",contributors:[],allUsers:[],description:"",skillsNeeded:[],categoryNeeded:[],image:"",open:!1,error:void 0},e.handleFormChange=function(t){if("image"===t.target.name){if(t.target.files[0].size>75e4)return void e.setState({error:"Maximum file size: 750kb"});var a=new FileReader;a.onload=function(){e.setState({temporaryPicture:a.result})},a.readAsDataURL(t.target.files[0]),e.setState({image:t.target.files[0],saved:!1})}else{var n;e.setState((n={},Object(ae.a)(n,t.target.name,t.target.value),Object(ae.a)(n,"saved",!1),n))}},e.handleError=function(t){e.setState({error:void 0})},e.handleFormSubmit=function(t){if(t.preventDefault(),e.state.title)if(e.state.description){var a=Object(ne.a)({},e.state);a.creator=e.props.context.user._id,delete a.saved,delete a.skillOptions,delete a.categoryOptions,delete a.temporaryPicture,delete a._id,delete a.allUsers,a.contributors&&(a.contributors=JSON.stringify(a.contributors)),a.skillsNeeded&&(a.skillsNeeded=JSON.stringify(a.skillsNeeded)),a.categoryNeeded&&(a.categoryNeeded=JSON.stringify(a.categoryNeeded));var n=Object(ue.a)(a);O(n).then((function(t){e.props.history.push("/collab/"+t._id),e.setState({apiRes:t}),e.setState({saved:!0})}))}else e.setState({error:"Please enter a description."});else e.setState({error:"Please enter a title."})},e.handleCategoryChange=function(t,a){e.setState({categoryNeeded:a,saved:!1})},e.handleSkillChange=function(t,a){e.setState({skillsNeeded:a,saved:!1})},e.handleUserChange=function(t,a){e.setState({contributors:a,saved:!1})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;x().then((function(t){e.setState({categoryOptions:t})})),w().then((function(t){e.setState({skillOptions:t})})),y().then((function(t){e.setState({allUsers:t})}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{onChange:this.handleFormChange,onSubmit:this.handleFormSubmit,className:"display--collab"},s.a.createElement("label",{htmlFor:"image"},s.a.createElement("div",{className:"display__collabimagebox",style:{backgroundImage:"url("+(this.state.temporaryPicture||"https://images.unsplash.com/photo-1566041510632-30055e21a9cf?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=900&h=500&fit=crop&ixid=eyJhcHBfaWQiOjF9")+")"}},s.a.createElement("input",{type:"file",name:"image",id:"image",className:"input--hidden"}))),s.a.createElement("div",{className:"container display display__collabbody"},s.a.createElement("button",{className:this.state.saved?"edit__button collabbutton saved":"edit__button collabbutton unsaved"},this.state.saved?"Saved":"Save"),s.a.createElement("h2",{className:"display__collabtitle"},s.a.createElement(me.a,{type:"text",name:"title",id:"title",value:this.state.title,maxLength:280,placeholder:"Title"})),s.a.createElement("h3",{className:"display__heading"},"Description"),s.a.createElement(me.a,{type:"description",name:"description",id:"description",value:this.state.description,className:"display__description",placeholder:"Description"}),s.a.createElement("div",{className:"display__multiselect"},s.a.createElement("h3",{className:"display__heading"},"Roles Needed"),s.a.createElement(ce.a,{multiple:!0,onChange:this.handleCategoryChange,limitTags:5,id:"tags-outlined",options:this.state.categoryOptions,value:this.state.categoryNeeded,getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}})),s.a.createElement("div",{className:"display__multiselect"},s.a.createElement("h3",{className:"display__heading"},"Skills Needed"),s.a.createElement(ce.a,{multiple:!0,onChange:this.handleSkillChange,id:"tags-outlined",options:this.state.skillOptions,value:this.state.skillsNeeded,getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}})),s.a.createElement("div",{className:"display__multiselect"},s.a.createElement("h3",{className:"display__heading"},"Contributors"),s.a.createElement(ce.a,{multiple:!0,onChange:this.handleUserChange,id:"tags-outlined",options:this.state.allUsers,value:this.state.contributors,getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}})),s.a.createElement("ul",{className:"display__bullets"},s.a.createElement("li",{className:"display__bullet"},s.a.createElement("select",{id:"open",value:this.state.open,name:"open"},s.a.createElement("option",{value:!0},"Open to collaborators"),s.a.createElement("option",{value:!1},"Not open to collaborators right now"))),s.a.createElement("li",{className:"display__bullet"},"Preferred method of contact:"," ",s.a.createElement("input",{type:"text",name:"preferredContact",id:"preferredContact",value:this.state.preferredContact}))))),!!this.state.error&&s.a.createElement(pe,{error:this.state.error,handleError:this.handleError}))}}]),a}(n.Component)),Ee=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={unread:null},e.componentDidMount=function(){e.setState(Object(ne.a)(Object(ne.a)({},e.props.message),{},{user:e.props.user}),(function(){e.state.messages.length>1&&e.setState({lastMessage:e.state.messages[e.state.messages.length-1],correspondent:e.state.recipients[0]._id===e.state.user._id?e.state.recipients[1]:e.state.recipients[0]},(function(){e.state.lastMessage.author!==e.state.user._id?e.state.unread&&e.setState({unread:!0}):e.setState({unread:!1})}))}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"truncateMessage",value:function(e,t){return e.length>t?e.substring(0,t)+"...":e}},{key:"render",value:function(){return s.a.createElement("a",{href:"/messages/"+this.state._id,className:"messages__onemessage"},!!this.state.correspondent&&s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:this.state.correspondent.profilePicture,className:"messages__avatar",alt:""}),s.a.createElement("div",{className:"messages__info"},s.a.createElement("div",{className:"messages__header"},s.a.createElement("div",{className:"messages__correspondent"},this.state.correspondent.name),this.state.unread&&s.a.createElement("div",{className:"messages__notification"})),!!this.state.lastMessage&&s.a.createElement("div",{className:"messages__lastmessage"},this.state.lastMessage.author===this.state.user._id?"You: ":this.state.correspondent.name+": ",this.truncateMessage(this.state.lastMessage.content,100)))))}}]),a}(n.Component),be=(a(116),B(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={newMessage:void 0,messages:[],users:[],currentUser:void 0},e.handleUserChange=function(t,a){e.setState({newMessage:a})},e.handleCreate=function(){e.state.newMessage&&(e.state.messages.forEach((function(t){t.recipients[0]._id!==e.state.newMessage._id&&t.recipients[1]._id!==e.state.newMessage._id||e.props.history.push("/messages/"+t._id)})),A(e.state.currentUser._id,e.state.newMessage._id).then((function(t){e.props.history.push("/messages/"+t._id)})))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b().then((function(t){e.setState({currentUser:t},(function(){D(e.state.currentUser._id).then((function(t){e.setState({messages:t})})).catch((function(e){return console.log(e)}))}))})),y().then((function(t){e.setState({users:t})}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"messages container"},s.a.createElement("div",{className:"messages__new"},s.a.createElement("p",{className:"messages__to"},"To:"),s.a.createElement(ce.a,{onChange:this.handleUserChange,id:"tags-outlined",options:this.state.users,value:this.state.newMessage,getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}}),s.a.createElement("button",{className:"messages__createbutton edit__button",onClick:this.handleCreate},"New")),s.a.createElement("div",{className:"messages__list"},this.state.messages?this.state.messages.map((function(t,a){return t.messages.length>1?s.a.createElement(Ee,{message:t,user:e.state.currentUser}):null})):s.a.createElement("p",null,"No messages to display")))}}]),a}(n.Component))),ve=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.message,t=new Date(e.time),a=this.props.user,n=this.props.message.author===a._id,r=t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+" "+t.getDay()+"/"+t.getMonth()+"/"+t.getFullYear();return s.a.createElement("div",{className:"message__onemessage "+(n?"sent":"received")},s.a.createElement("div",{className:"message__time"},r),s.a.createElement("div",{className:"message__content"},e.content))}}]),a}(n.Component),ye=(a(117),B(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={messages:[],newMessage:[],correspondent:void 0,recipients:void 0},e.sendMessage=function(){if(e.state.newMessage){var t={time:Date.now(),author:e.props.context.user,content:e.state.newMessage};I(e.props.match.params.id,t).then((function(t){return e.setState({messages:t.messages,newMessage:""})})).catch((function(e){return console.log(e)}))}},e.componentDidMount=function(){setInterval(e.checkMessage,1e3)},e.checkMessage=function(){M(e.props.match.params.id).then((function(t){return e.setState({messages:t.messages,recipients:t.recipients},(function(){b().then((function(t){e.setState({user:t},(function(){e.state.recipients&&e.state.user&&(e.state.recipients[0]._id===e.state.user._id?e.setState({recipient:e.state.recipients[1]}):e.setState({recipient:e.state.recipients[0]})),e.state.user._id!==e.state.messages[e.state.messages.length-1].author&&T(e.props.match.params.id)}))}))}))}))},e.componentDidUpdate=function(){e.updateScroll()},e}return Object(o.a)(a,[{key:"updateScroll",value:function(){var e=document.querySelector(".message__scrollcontainer");e.scrollTop=e.scrollHeight}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"message container"},s.a.createElement("div",{className:"message__header"},s.a.createElement("a",{className:"message__back",href:"/messages"},"\xab Back"),s.a.createElement("span",{className:"message__recipient"},!!this.state.recipient&&s.a.createElement("img",{className:"message__avatar",src:this.state.recipient.profilePicture,alt:""}),!!this.state.recipient&&this.state.recipient.name),s.a.createElement("span",{className:"message__back message__hidden"},"\xab Back")),s.a.createElement("div",{className:"message__scrollcontainer"},s.a.createElement("div",{className:"message__thread"},this.state.messages&&this.state.user&&this.state.messages.map((function(t,a){return a>0&&s.a.createElement(ve,{message:t,user:e.state.user})})))),s.a.createElement("div",{className:"message__compose"},s.a.createElement("div",{className:"message__textcontainer"},s.a.createElement(me.a,{placeholder:"New Message",value:this.state.newMessage,onChange:function(t){e.setState({newMessage:t.target.value})}})),s.a.createElement("button",{className:"edit__button message__sendmessage",onClick:this.sendMessage},"Send")))}}]),a}(n.Component))),Ne=function(){return s.a.createElement("div",{className:"tabs"},s.a.createElement("div",{className:"tabs__item"},s.a.createElement(i.c,{exact:!0,activeClassName:"tabs--active",className:"tabs__link",to:"/"},"Freelancers")),s.a.createElement("div",{className:"tabs__item"},s.a.createElement(i.c,{exact:!0,activeClassName:"tabs--active",className:"tabs__link",to:"/collabs"},"Collaborations")))},ke=function(e){var t=e.freelancer;return s.a.createElement(i.b,{className:"card",to:"/".concat(t.userName)},s.a.createElement("div",{style:{backgroundImage:"url(".concat(t.profilePicture,")")},className:"card__aside"}),s.a.createElement("div",{className:"card__body"},s.a.createElement("h3",{className:"card__title"},t.userCategory.map((function(e,t){return s.a.createElement("div",{key:t},e.name)}))),s.a.createElement("h2",{className:"card__subtitle"},t.name),s.a.createElement("p",{className:"card__copy"},t.location),s.a.createElement("p",{className:"card__copy"},t.remote?"I don't mind working remotely.":"I prefer working on site.")))},Se=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={filterCity:[],filterCategory:[],filterSkill:[],categoriesUsed:[],skillsUsed:[],citiesUsed:[],filteredFreelancersArray:[]},e.handleCityChange=function(t,a){e.setState({filterCity:a}),e.handleFreelancersUpdate(a,e.state.filterCategory,e.state.filterSkill)},e.handleCategoryChange=function(t,a){e.setState({filterCategory:a}),e.handleFreelancersUpdate(e.state.filterCity,a,e.state.filterSkill)},e.handleSkillChange=function(t,a){e.setState({filterSkill:a}),e.handleFreelancersUpdate(e.state.filterCity,e.state.filterCategory,a)},e.handleFreelancersUpdate=function(t,a,n){var s=Object(d.a)(e.props.freelancers);t&&(s=s.filter((function(e){console.log(t),console.log(e.location),e.location.includes(t)}))),a&&a.forEach((function(e){s=s.filter((function(t){for(var a=0;a<t.userCategory.length;a++)return t.userCategory[a]._id===e._id}))})),n&&n.forEach((function(e){s=s.filter((function(t){return t.userSkills.includes(e)}))})),e.props.updateFreelancersFeed(s)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;L().then((function(t){return e.setState({categoriesUsed:t})})).catch((function(e){return console.log(e)})),F().then((function(t){return e.setState({skillsUsed:t})})).catch((function(e){return console.log(e)})),P().then((function(t){return e.setState({citiesUsed:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return s.a.createElement("form",{className:"filter",action:""},s.a.createElement("div",{className:"filter__group"},s.a.createElement("div",{className:"filter__label"},"Pick a location"),s.a.createElement(ce.a,{className:"filter__input",onChange:this.handleCityChange,value:this.state.filterCity,limitTags:3,id:"tags-outlined",options:this.state.citiesUsed||"",getOptionLabel:function(e){return e},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}})),s.a.createElement("div",{className:"filter__group"},s.a.createElement("div",{className:"filter__label"},"Category"),s.a.createElement(ce.a,{className:"filter__input",multiple:!0,onChange:this.handleCategoryChange,limitTags:3,id:"tags-outlined",value:this.state.filterCategory,options:this.state.categoriesUsed||"",getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}})),s.a.createElement("div",{className:"filter__group"},s.a.createElement("div",{className:"filter__label"},"Skills"),s.a.createElement(ce.a,{className:"filter__input",multiple:!0,onChange:this.handleSkillChange,value:this.state.filterSkill,limitTags:3,id:"tags-outlined",options:this.state.skillsUsed||"",getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return s.a.createElement(oe.a,e)}})))}}]),a}(n.Component),Ce=(a(73),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={freelancers:[],filteredFreelancers:[]},e.updateFreelancersFeed=function(t){e.setState({filteredFreelancers:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;U().then((function(t){return e.setState({freelancers:t,filteredFreelancers:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"feed-container"},s.a.createElement(Ne,null),!this.state.freelancers&&s.a.createElement("h2",null,"Sorry, no freelancers found"," ",s.a.createElement("span",{role:"img","aria-label":"confused-face-emoji"},"\ud83d\ude15")),s.a.createElement(Se,{freelancers:this.state.freelancers,updateFreelancersFeed:this.updateFreelancersFeed}),this.state.filteredFreelancers.map((function(e,t){return s.a.createElement(ke,{key:t,freelancer:e})})))}}]),a}(n.Component)),Oe=function(){return s.a.createElement("form",{className:"filter",action:""},s.a.createElement("div",{className:"filter__group"},s.a.createElement("label",{className:"filter__label",htmlFor:"city"},"City"),s.a.createElement("br",null),s.a.createElement("input",{className:"filter__input",name:"city",id:"city",type:"text"})),s.a.createElement("div",{className:"filter__group"},s.a.createElement("label",{className:"filter__label",htmlFor:"category"},"Category"),s.a.createElement("br",null),s.a.createElement("input",{className:"filter__input",type:"text",name:"category",id:"category"})),s.a.createElement("div",{className:"filter__group"},s.a.createElement("label",{className:"filter__label",htmlFor:"skills"},"Skill"),s.a.createElement("br",null),s.a.createElement("input",{className:"filter__input",type:"text",name:"skills",id:"skills"})))},je=function(e){var t=e.collab;return s.a.createElement(i.b,{className:"card",to:"/collab/".concat(t._id)},s.a.createElement("div",{style:{backgroundImage:"url(".concat(t.image,")")},className:"card__aside"}),s.a.createElement("div",{className:"card__body"},s.a.createElement("h3",{className:"card__title"},t.title),s.a.createElement("p",{className:"card__copy"},t.description),s.a.createElement("p",{className:"card__copy"},t.open?"Accepting coworkers!":"This project team is complete.")))},xe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={collabs:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;j().then((function(t){return e.setState({collabs:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"feed-container"},s.a.createElement(Ne,null),!this.state.collabs&&s.a.createElement("h2",null,"Sorry, no collaborations found"," ",s.a.createElement("span",{role:"img","aria-label":"confused-face-emoji"},"\ud83d\ude15")),s.a.createElement(Oe,null),this.state.collabs.map((function(e,t){return s.a.createElement(je,{key:t,collab:e})})))}}]),a}(s.a.Component),we=B(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={categoryOptions:[],skillOptions:[],saved:!0,title:"",creator:"",contributors:[],description:"",skillsNeeded:[],categoryNeeded:[],image:"",open:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;S(this.props.match.params.id).then((function(t){e.setState(t)}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"display--collab"},this.state.image&&s.a.createElement("div",{className:"display__collabimagebox",style:{backgroundImage:"url("+this.state.image+")"}}),s.a.createElement("div",{className:"container display display__collabbody"},this.props.context.user&&this.props.context.user._id===this.state.creator._id&&s.a.createElement("button",{className:"edit__button collabbutton",onClick:function(){e.props.history.push("/collab/"+e.props.match.params.id+"/edit")}},"Edit"),s.a.createElement("h2",{className:"display__collabtitle"},this.state.title),s.a.createElement("h3",{className:"display__heading"},"Description"),s.a.createElement("div",{className:"display__description"},this.state.description),s.a.createElement("ul",{className:"display__bullets"},s.a.createElement("li",{className:"display__bullet"},this.state.open?s.a.createElement(s.a.Fragment,null,s.a.createElement(Y.a,{icon:X.m})," This project is seeking collaborators"):s.a.createElement(s.a.Fragment,null,s.a.createElement(Y.a,{icon:X.n}),"This project is not seeking collaborators")),s.a.createElement("li",{className:"display__bullet"},s.a.createElement(Y.a,{icon:X.i}),"Created by"," ",s.a.createElement(i.b,{className:"display__contributor",href:"/"+this.state.creator.userName},this.state.creator.name)),this.state.creator.preferredContact&&s.a.createElement("li",{className:"display__bullet"},s.a.createElement(Y.a,{icon:X.d}),"Preferred method of contact:"," ",this.state.creator.preferredContact)),s.a.createElement(Q,{heading:"Roles Needed",data:this.state.categoryNeeded,label:"name",className:"display__fullwidth"}),s.a.createElement(Q,{heading:"Skills Needed",data:this.state.skillsNeeded,label:"name",className:"display__fullwidth"}),s.a.createElement(Q,{heading:"Collaborators",data:this.state.contributors,label:"name",className:"display__fullwidth",linked:!0})))}}]),a}(n.Component)),Pe=function(){return s.a.createElement("div",{className:"about-container"},s.a.createElement("h1",{className:"about-container__title"},"About Freely"),s.a.createElement("div",{className:"about-container__body"},s.a.createElement("p",{className:"about-container__text"},"This is the about page")))},Fe=function(){return s.a.createElement("div",{className:"error-page"},s.a.createElement("h1",{className:"error-page__title"},"Woooops",s.a.createElement("br",null),s.a.createElement("span",null,"four-oh-four")),s.a.createElement("img",{src:"./media/error_404.svg",alt:"error page palm-tree not-found",className:"error-page__image"}),s.a.createElement("div",{className:"error-page__body"},s.a.createElement("p",null,"Sorry, this user doesn't exist or has been deleted."),s.a.createElement(i.b,{to:"/"},s.a.createElement("h3",null,s.a.createElement(Y.a,{icon:X.c,className:"error-page__body--icon"})," ","Back home"))))},Le=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={hamburgerMenuOpen:!1},e.hamburgerMenuToggleHandler=function(){e.setState((function(e){return{hamburgerMenuOpen:!e.hamburgerMenuOpen}}))},e.backdropClickHandler=function(){e.setState({hamburgerMenuOpen:!1})},e}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(Z,{toggled:this.state.hamburgerMenuOpen,hamburgerClickHandler:this.hamburgerMenuToggleHandler,click:this.backdropClickHandler}),this.state.hamburgerMenuOpen?s.a.createElement($,{click:this.backdropClickHandler}):null,s.a.createElement(K,{show:this.state.hamburgerMenuOpen,click:this.backdropClickHandler}),s.a.createElement("main",{className:"main"},s.a.createElement(H.d,null,s.a.createElement(H.b,{exact:!0,path:"/",component:Ce}),s.a.createElement(H.b,{exact:!0,path:"/collabs",component:xe}),s.a.createElement(G,{exact:!0,path:"/messages",component:be}),s.a.createElement(G,{exact:!0,path:"/messages/:id",component:ye}),s.a.createElement(H.b,{exact:!0,path:"/collab/new",component:_e}),s.a.createElement(G,{exact:!0,path:"/collab/:id/edit",component:ge}),s.a.createElement(H.b,{exact:!0,path:"/collab/:id",component:we}),s.a.createElement(H.b,{exact:!0,path:"/about",component:Pe}),s.a.createElement(H.b,{exact:!0,path:"/login",component:ie}),s.a.createElement(G,{exact:!0,path:"/:username/edit",component:he}),s.a.createElement(H.b,{exact:!0,path:"/error_404",component:Fe}),s.a.createElement(H.b,{exact:!0,path:"/:username",component:te}),s.a.createElement(H.b,{exact:!0,path:"/*",component:Fe}))))}}]),a}(n.Component);a(118);l.a.render(s.a.createElement(i.a,null,s.a.createElement(z,null,s.a.createElement(Le,null))),document.getElementById("root"))},41:function(e,t,a){},56:function(e,t,a){},73:function(e,t,a){},86:function(e,t,a){e.exports=a(119)}},[[86,1,2]]]);
//# sourceMappingURL=main.4ed0c2b2.chunk.js.map